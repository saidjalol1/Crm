{% extends 'trendi_base.html' %}
{% load static %}
{% block title %}Billur{% endblock title %}
{% block style %}
{% endblock style %}
{% block content %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
      const addToWishlistButtons = document.querySelectorAll('.add-to-wishlist-btn');
  
      addToWishlistButtons.forEach(button => {
        button.addEventListener('click', function() {
          const productId = this.getAttribute('data-product-id');
  
          fetch(`add-to-wishlist/${productId}/`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              'X-CSRFToken': '{{ csrf_token }}',
            },
          })
          .then(response => response.json())
          .then(data => {
            if (data.is_added) {

              alert('Mahsulot Yoqtirganlaringiz qatoriga qo\'shildi!');
            } else {
              alert('Mahsulot Yoqtirganlaringiz qatoridan olib tashlandi!');
            }
          })
          .catch(error => {
            console.error('Error:', error);
          });
        });
      });
    });
  </script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<section class="hero">
    <div class="container">
        <div class="hero-in">
            <div class="hero__slide--container">
                <div class="hero__buttons prev">
                    <i class="fas fa-chevron-left" onclick="plusSlides(-1)"></i>
                </div>
                <div class="hero__slide fade">
                    <img class="hero__image" src="{% static 'images/promotion-1.jpg' %}" alt="Hero image">
                </div>
                <div class="hero__slide fade">
                    <img class="hero__image" src="{% static 'images/promotion-2.png' %}" alt="Hero image">
                </div>  
                <div class="hero__buttons next">
                    <i class="fas fa-chevron-right" onclick="plusSlides(1)"></i>
                </div>
            </div>
            <div style="text-align:center">
                <span class="dot" onclick="currentSlide(1)"></span>
                <span class="dot" onclick="currentSlide(2)"></span>
            </div>
        </div>
    </div>
</section>
        <section class="products"> 
            <div class="container">
                <div class="products-in">
                    
                    <div class="mb-4">
                        <form action="" method="GET" class="w-100 px-2 d-flex justify-content-center align-items-center mb-10" >
                            <button type="submit" id="btn1" class="btn btn-outline-success mx-2"  name="billur_products">Billur tovarlar</button>
                            <button type="submit" id="btn2" class="btn btn-outline-success "  name="extra_products">Boshqalar</button>
                        </form>
                    </div>
                    <div class="products__cardbox">
                        {% for i in object_list %}
                        <div href="" class="products__card">
                            <img class="product__card--image" src="{{ i.image.url }}" alt="Product image">
                            <span class="d-flex justify-content-between px-4 mt-3">
                                <div class="d-flex align-items-center">
                                    <h4>{{ i.price }} So'm</h4>
                                    <p style="color: red;" class="ml-2">{% if i.category.name == 'Billur' %}(Billur){% else %}{% endif %}</p>
                                </div>
                                <button class="add-to-wishlist-btn" data-product-id="{{ i.id }}" style="border: none;background-color: transparent;outline: none;">
                                    <svg xmlns="http://www.w3.org/2000/svg" height="30" width="30" viewBox="0 0 512 512">
                                        <path fill="{% if i in wishlist_products.all %}#FF0000{% else %} {% endif %}" d="M225.8 468.2l-2.5-2.3L48.1 303.2C17.4 274.7 0 234.7 0 192.8v-3.3c0-70.4 50-130.8 119.2-144C158.6 37.9 198.9 47 231 69.6c9 6.4 17.4 13.8 25 22.3c4.2-4.8 8.7-9.2 13.5-13.3c3.7-3.2 7.5-6.2 11.5-9c0 0 0 0 0 0C313.1 47 353.4 37.9 392.8 45.4C462 58.6 512 119.1 512 189.5v3.3c0 41.9-17.4 81.9-48.1 110.4L288.7 465.9l-2.5 2.3c-8.2 7.6-19 11.9-30.2 11.9s-22-4.2-30.2-11.9zM239.1 145c-.4-.3-.7-.7-1-1.1l-17.8-20c0 0-.1-.1-.1-.1c0 0 0 0 0 0c-23.1-25.9-58-37.7-92-31.2C81.6 101.5 48 142.1 48 189.5v3.3c0 28.5 11.9 55.8 32.8 75.2L256 430.7 431.2 268c20.9-19.4 32.8-46.7 32.8-75.2v-3.3c0-47.3-33.6-88-80.1-96.9c-34-6.5-69 5.4-92 31.2c0 0 0 0-.1 .1s0 0-.1 .1l-17.8 20c-.3 .4-.7 .7-1 1.1c-4.5 4.5-10.6 7-16.9 7s-12.4-2.5-16.9-7z"/>
                                    </svg>
                                </button>
                            </span>
                            
                            <span class="px-4">
                                {% if 0 == i.amount %}
                                <h5>Omborda qolmagan</h5>
                                {% else %}
                                <b>Omborda: {{ i.amount }} ta</b>
                                {% endif %}
                            </span>
                            <span class="mt-3 d-flex justify-content-start align-items-center pl-2">
                                <form action="{% url 'products:add_to_card' i.id %}" method="POST" class="d-flex align-items-center">
                                    {% csrf_token %}
                                    <div class="col-3">
                                        <input type="number" name="quantity" class="form-control input-number" value="1" style="height: 100%;">
                                    </div>
                                    <!-- Quantity End -->
                                    <div class="shopping-cart">
                                        <button class="btn btn-primary" type="submit" style="height: 100%;">
                                            <i class="fa fa-shopping-basket mr-2"></i>Savatchaga
                                        </button>
                                    </div>
                                </form>
                            </span>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                <nav aria-label="Page navigation example">
                    <ul class="pagination justify-content-center">
                        {% if current_page.has_previous %}
                      <li class="page-item disabled">
                        <a class="page-link" href="?page=1" tabindex="-1">Oldingi</a>
                      </li>
                      {% endif %}
                      {% for page_number in paginator.page_range %}
                      <li class="page-item {% if page_number == current_page.number %} active {% endif %}">
                        <a class="page-link" href="?page={{ page_number }}">{{ page_number }}</a>
                      </li>
                      {% endfor %}
                      {% if current_page.has_next %}
                      <li class="page-item">
                        <a class="page-link" href="?page={{ paginator.num_pages }}">Keyingi</a>
                      </li>
                      {% endif %}
                    </ul>
                </nav>
                <!-- <div class='d-flex justify-content-center align-items-center'>
                    <nav>
                        <ul class="pagination pagination-gutter">
                            {% if current_page.has_previous %}
                            <li class="page-item page-indicator">
                                <a class="page-link" href="?page=1">
                                    <i class="la la-angle-left"></i>
                                </a>
                            </li>
                            {% endif %}
                            {% for page_number in paginator.page_range %}
                            <li class="page-item {% if page_number == current_page.number %} active {% endif %}">
                                <a class="page-link" href="?page={{ page_number }}">{{ page_number }}</a>
                            </li>
                            {% endfor %}
                            {% if current_page.has_next %}
                            <li class="page-item page-indicator">
                                <a class="page-link" href="?page={{ paginator.num_pages }}">
                                    <i class="la la-angle-right"></i></a>
                            </li>
                            {% endif %}
                        </ul>
                    </nav>
                </div> -->
            </div>
           
        </section>
        <section class="contact">
            <div class="container">
                <div class="contact-in">
                    <b class="contact__title">Biz bilan Bog'lanish</b>
                    <b class="contact__subtitle contact__phone-number">+998 88-425-25-42</b>
                    <b class="contact__subtitle contact__telegram"><a href="https://t.me/billurandijan" style="color: white;"><i class="fab fa-telegram"></i></a></b>
                </div>
            </div>
        </section>
{% endblock content %}