{% extends 'trendi_base.html' %}
{% load static %}
{% block title %}Billur{% endblock title %}
{% block style %}
{% endblock style %}
{% block content %}
<script>
    // Ajax request to add product to wishlist
    $('.add-to-wishlist').on('click', function() {
        var productId = $(this).data('product-id');
        $.ajax({
            type: 'POST',
            url: '/trendi/',
            data: {
                'product_id': productId,
                'csrfmiddlewaretoken': '{{ csrf_token }}'
            },
            success: function(response) {
                if (response.success) {
                    alert('Product added to wishlist!');
                } else {
                    alert('Failed to add product to wishlist.');
                }
            },
            error: function() {
                alert('Error in Ajax request.');
            }
        });
    });
</script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<section class="hero">
    <div class="container">
        <div class="hero-in">
            <div class="hero__slide--container">
                <div class="hero__buttons prev">
                    <i class="fas fa-chevron-left" onclick="plusSlides(-1)"></i>
                </div>
                <div class="hero__slide fade">
                    <img class="hero__image" src="{% static 'images/promotion-1.jpg' %}" alt="Hero image">
                </div>
                <div class="hero__slide fade">
                    <img class="hero__image" src="{% static 'images/promotion-2.png' %}" alt="Hero image">
                </div>  
                <div class="hero__buttons next">
                    <i class="fas fa-chevron-right" onclick="plusSlides(1)"></i>
                </div>
            </div>
            <div style="text-align:center">
                <span class="dot" onclick="currentSlide(1)"></span>
                <span class="dot" onclick="currentSlide(2)"></span>
            </div>
        </div>
    </div>
</section>
        <section class="products"> 
            <div class="container">
                <div class="products-in">
                    
                    <div class="mb-4">
                        <form action="" method="GET" class="w-100 px-2 d-flex justify-content-center align-items-center mb-10" >
                            <button type="submit" id="btn1" class="btn btn-outline-success mx-2"  name="billur_products">Billur tovarlar</button>
                            <button type="submit" id="btn2" class="btn btn-outline-success "  name="extra_products">Boshqalar</button>
                        </form>
                    </div>
                    <div class="products__cardbox">
                        {% for i in object_list %}
                        <div href="" class="products__card">
                            <img class="product__card--image" src="{{ i.image.url }}" alt="Product image">
                            <span class="d-flex justify-content-between px-4 mt-3">
                                <div class="d-flex align-items-center">
                                    <h4>{{ i.price }} So'm</h4>
                                    <p style="color: red;" class="ml-2">{% if i.category.name == 'Billur' %}(Billur){% else %}{% endif %}</p>
                                </div>
                                <h4 class="add-to-wishlist"   style="cursor: pointer;" data-product-id="{{ product.id }}" name="wishlist">
                                    <i id="wishlist-icon" class="fas fa-heart icon {% if i in wishlist_products.products.all %}in_wishlist{% endif %}" style="font-size: 20px;"></i>
                                </h4>
                            </span>
                            
                            <span class="px-4">
                                {% if 0 == i.amount %}
                                <h5>Omborda qolmagan</h5>
                                {% else %}
                                <b>Omborda: {{ i.amount }} ta</b>
                                {% endif %}
                            </span>
                            <span class="mt-3 d-flex justify-content-start align-items-center pl-2">
                                <form action="{% url 'products:add_to_card' i.id %}" method="POST" class="d-flex align-items-center">
                                    {% csrf_token %}
                                    <div class="col-3">
                                        <input type="number" name="quantity" class="form-control input-number" value="1" style="height: 100%;">
                                    </div>
                                    <!-- Quantity End -->
                                    <div class="shopping-cart">
                                        <button class="btn btn-primary" type="submit" style="height: 100%;">
                                            <i class="fa fa-shopping-basket mr-2"></i>Savatchaga
                                        </button>
                                    </div>
                                </form>
                            </span>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                <nav aria-label="Page navigation example">
                    <ul class="pagination justify-content-center">
                        {% if current_page.has_previous %}
                      <li class="page-item disabled">
                        <a class="page-link" href="?page=1" tabindex="-1">Oldingi</a>
                      </li>
                      {% endif %}
                      {% for page_number in paginator.page_range %}
                      <li class="page-item {% if page_number == current_page.number %} active {% endif %}">
                        <a class="page-link" href="?page={{ page_number }}">{{ page_number }}</a>
                      </li>
                      {% endfor %}
                      {% if current_page.has_next %}
                      <li class="page-item">
                        <a class="page-link" href="?page={{ paginator.num_pages }}">Keyingi</a>
                      </li>
                      {% endif %}
                    </ul>
                </nav>
                <!-- <div class='d-flex justify-content-center align-items-center'>
                    <nav>
                        <ul class="pagination pagination-gutter">
                            {% if current_page.has_previous %}
                            <li class="page-item page-indicator">
                                <a class="page-link" href="?page=1">
                                    <i class="la la-angle-left"></i>
                                </a>
                            </li>
                            {% endif %}
                            {% for page_number in paginator.page_range %}
                            <li class="page-item {% if page_number == current_page.number %} active {% endif %}">
                                <a class="page-link" href="?page={{ page_number }}">{{ page_number }}</a>
                            </li>
                            {% endfor %}
                            {% if current_page.has_next %}
                            <li class="page-item page-indicator">
                                <a class="page-link" href="?page={{ paginator.num_pages }}">
                                    <i class="la la-angle-right"></i></a>
                            </li>
                            {% endif %}
                        </ul>
                    </nav>
                </div> -->
            </div>
           
        </section>
        <section class="contact">
            <div class="container">
                <div class="contact-in">
                    <b class="contact__title">Biz bilan Bog'lanish</b>
                    <b class="contact__subtitle contact__phone-number">+998 88-425-25-42</b>
                    <b class="contact__subtitle contact__telegram"><a href="https://t.me/billurandijan" style="color: white;"><i class="fab fa-telegram"></i></a></b>
                </div>
            </div>
        </section>
{% endblock content %}