{% extends 'trendi_base.html' %}
{% load static %}
{% block style %}
{% endblock style %}
{% block title %}Savatcha{% endblock title%}
{% block content %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

<div class="container">
  {% for message in messages %}
        <div class="alert alert-{{ message.tags }} col-10 mb-4" style="margin: 0 auto;text-align:center;">
          {{ message }}
        </div>
        {% endfor %}
    {% if cart_items %}
    <div class="row d-flex justify-content-center align-items-center h-100 mt-10">
        
      
        <div class="col-10">
          {% if  cart_sum > 100000 %}
           <p></p>
          {% else %}
          <div class="alert alert-warning col-10 mb-4 text-center text-2 text-sm-4" style="margin: 0 auto;">
            Umumiy qiymat 100.000 so'mni tashkil etganda buyurtma berish mumkin!!!
          </div>
          {% endif %}
          <h4 style="font-size: 22px;">Umumiy qiymat {{ cart_sum }}</h4>
          {% for i in cart_items %}
          <div class="card rounded-3 mb-4 mt-4">
            <div class="card-body p-4">
              <div class="row d-flex justify-content-between align-items-center pr-8">
                <div class="col-md-2 col-lg-2 col-xl-2" style="height: 200px;">
                  <img src="{{ i.product.image.url }}" class="img-fluid rounded-3" alt="{{ i.product.name }}" style="width: 100%;height: 100%;">
                </div>
                <div class="col-md-3 col-lg-3 col-xl-3">
                  <h4 class="mb-2" style="font-size: 25px;">{{ i.product.name }}</h4>
                  <p style="font-size: 20px;color: black;"><span  style="font-size: 22px;color: black;">Chegirma: </span>{{ i.product.discount }}%</p>
                  <p style="font-size: 20px;color: black;"><span  style="font-size: 22px;color: black;">Donasi: </span>{{ i.product.price }} so'm</p>
                </div>
                <div class="col-md-3 col-lg-3 col-xl-2 d-flex">
                  <form action="" method="POST" class="d-flex">
                    {% csrf_token %}
                    <input type="text" name="product" value="{{ i.product.id }}" style="display: none;">
                 
                        <input id="form1" min="0" name="quantity" value="{{ i.quantity }}" type="number" class="form-control form-control-sm my-2 mx-2" style="font-size: 18px;color: black;width: 70px;"/>
                    
                    
                        <button class="btn btn-primary  px-2  my-2 mx-2" name="add_quantity">Saqlash</button>
                    
                   
                  </form>
                </div>
                  <div class="col-md-3 col-lg-2 col-xl-2 offset-lg-1 d-flex justify-content-between mt-4 mt-sm-0">
                    <h5 class="mb-0" style="font-size: 20px;">{{ i.overall_price }} so'm</h5>
                    <form action="" method="POST" class="d-flex justify-content-center align-items-center mx-4">
                      {% csrf_token %}
                      <input type="text" name="product_delete" value="{{ i.product.id }}" style="display: none;">
                      <button type="submit" name="delete" style="border: none;background-color: transparent;cursor:pointer;">
                        <svg fill="#000000" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
	                                 height="1.5em" viewBox="0 0 482.428 482.429"
	                                xml:space="preserve">
                          <g>
	                        <g>
		                        <path d="M381.163,57.799h-75.094C302.323,25.316,274.686,0,241.214,0c-33.471,0-61.104,25.315-64.85,57.799h-75.098
			                        c-30.39,0-55.111,24.728-55.111,55.117v2.828c0,23.223,14.46,43.1,34.83,51.199v260.369c0,30.39,24.724,55.117,55.112,55.117
			                        h210.236c30.389,0,55.111-24.729,55.111-55.117V166.944c20.369-8.1,34.83-27.977,34.83-51.199v-2.828
			                        C436.274,82.527,411.551,57.799,381.163,57.799z M241.214,26.139c19.037,0,34.927,13.645,38.443,31.66h-76.879
			                        C206.293,39.783,222.184,26.139,241.214,26.139z M375.305,427.312c0,15.978-13,28.979-28.973,28.979H136.096
			                        c-15.973,0-28.973-13.002-28.973-28.979V170.861h268.182V427.312z M410.135,115.744c0,15.978-13,28.979-28.973,28.979H101.266
			                        c-15.973,0-28.973-13.001-28.973-28.979v-2.828c0-15.978,13-28.979,28.973-28.979h279.897c15.973,0,28.973,13.001,28.973,28.979
			                        V115.744z"/>
		                        <path d="M171.144,422.863c7.218,0,13.069-5.853,13.069-13.068V262.641c0-7.216-5.852-13.07-13.069-13.07
			                        c-7.217,0-13.069,5.854-13.069,13.07v147.154C158.074,417.012,163.926,422.863,171.144,422.863z"/>
		                        <path d="M241.214,422.863c7.218,0,13.07-5.853,13.07-13.068V262.641c0-7.216-5.854-13.07-13.07-13.07
			                        c-7.217,0-13.069,5.854-13.069,13.07v147.154C228.145,417.012,233.996,422.863,241.214,422.863z"/>
		                        <path d="M311.284,422.863c7.217,0,13.068-5.853,13.068-13.068V262.641c0-7.216-5.852-13.07-13.068-13.07
			                        c-7.219,0-13.07,5.854-13.07,13.07v147.154C298.213,417.012,304.067,422.863,311.284,422.863z"/>
	                          </g>
                          </g>
                        </svg>
                      <button>
                    </form>
                  </div>
                </div>
            </div>
          </div>
          {% endfor %}
         {% else %}
         <h4 style="color: black;font-size: 25px;text-align: center;">Hech narsa yo'q</h4>

        </div>
    </div>
    {% endif %}
    <div class="container">
      <div class="d-flex justify-content-end align-items-center">
        {% if  cart_sum > 100000 %}
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
            Zakaz berish
        </button>
        {% else %}
        <a href="/"  type="button" class="btn btn-primary">
            Zakaz berish
        </a>
        {% endif %}
    </div>
    </div>
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <form method="POST">
                {% csrf_token %}
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
                <p>
                  <label>Ism Familiya</label>
                  <input  class="form-control" placeholder='Ism Familiya' name="customer_full_name"/>
                </p>
                <p>
                  <label>Telefon Raqam</label>
                  <input  class="form-control" placeholder='Telefon Raqam' name="phone_number"/>
                </p>
                <p>
                  <label>Manzil</label>
                  <input  class="form-control" placeholder='Manzil' name="address"/>
                </p>
                <p>
                  <label>Mo'ljal</label>
                  <input  class="form-control" placeholder="Mo'ljal" name="target"/>
                </p>
            </div>
            <div class="modal-footer">
              <button type="submit" class="btn btn-primary" name="order">Buyurtma berish</button>
            </div>
        </form>
            </div>
          </div>
        </div>
      </div>
<div class="modal fade" id="order" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
<div class="modal-dialog" role="document">
  <div class="modal-content">
  <form method="POST">
    {% csrf_token %}
  <div class="modal-header">
    <h5 class="modal-title" id="exampleModalLabel">Zakaz Berish</h5>
    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
    <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
      <p>
        <label>Ism Familiya</label>
        <input  class="form-control" placeholder='Ism Familiya' name="customer_full_name"/>
      </p>
      <p>
        <label>Telefon Raqam</label>
        <input  class="form-control" placeholder='Telefon Raqam' name="phone_number"/>
      </p>
      <p>
        <label>Manzil</label>
        <input  class="form-control" placeholder='Manzil' name="address"/>
      </p>
      <p>
        <label>Mo'ljal</label>
        <input  class="form-control" placeholder="Mo'ljal" name="target"/>
      </p>
  </div>
  <div class="modal-footer">
    <button type="submit" class="btn btn-primary" name="order">Buyurtma berish</button>
  </div>
</form>
  </div>
</div>
</div>
</div>             
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
{% endblock content %}
        

    <!-- **********************************
        Scripts
    ***********************************-->
    <!-- Required vendors -->
    <!-- <script src="./vendor/global/global.min.js"></script>
	<script src="./vendor/bootstrap-select/dist/js/bootstrap-select.min.js"></script>
	<script src="./vendor/chart.js/Chart.bundle.min.js"></script>
    <script src="./js/custom.min.js"></script>
	<script src="./js/deznav-init.js"></script>
	<script src="./vendor/owl-carousel/owl.carousel.js"></script> -->
	
	<!-- Chart piety plugin files -->
    <!-- <script src="./vendor/peity/jquery.peity.min.js"></script> -->
	
	<!-- Apex Chart -->
	<!-- <script src="./vendor/apexchart/apexchart.js"></script> -->
	
	<!-- Dashboard 1 -->
	<!-- <script src="./js/dashboard/dashboard-1.js"></script> -->
    
    <!-- <script src="./vendor/flot/jquery.flot.js"></script> -->
    <!-- <script src="./vendor/flot/jquery.flot.pie.js"></script> -->
    <!-- <script src="./vendor/flot/jquery.flot.resize.js"></script> -->
    <!-- <script src="./vendor/flot-spline/jquery.flot.spline.min.js"></script> -->
    <!-- <script src="./js/plugins-init/flot-init.js"></script> -->
	<!-- <script>
		function carouselReview(){
			/*  testimonial one function by = owl.carousel.js */
			jQuery('.testimonial-one').owlCarousel({
				loop:true,
				autoplay:true,
				margin:30,
				nav:false,
				dots: false,
				left:true,
				navText: ['<i class="fa fa-chevron-left" aria-hidden="true"></i>', '<i class="fa fa-chevron-right" aria-hidden="true"></i>'],
				responsive:{
					0:{
						items:1
					},
					484:{
						items:2
					},
					882:{
						items:3
					},	
					1200:{
						items:2
					},			
					
					1540:{
						items:3
					},
					1740:{
						items:4
					}
				}
			})			
		}
		jQuery(window).on('load',function(){
			setTimeout(function(){
				carouselReview();
			}, 1000); 
		});
	</script> -->
